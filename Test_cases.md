Test cases
==========

Модульные тесты
---------------

### JSON

- Если JSON файл имеет неверный синтаксис, то тестируемый метод возвращает сообщение об ошибке с кодом 400;
+ Если JSON файл имеет верный синтаксис, то тестируемый метод не должен возвращать ошибок;

### Данные

#### card_num

- Если `card_num` не содержит ровно 16 цифр из диапазона 0-9 ('abc?"123!@+'), то тестируемый метод возвращает сообщение об ошибке с кодом 400;
+ Если `card_num` имеет значение '0123456789101112', то тестируемый метод не должен возвращать ошибок;

#### card_holder

- Если `card_holder` пустой (''), то тестируемый метод возвращает сообщение об ошибке с кодом 400;
- Если `card_holder` имеет длину больше стандарта ('A{10000}'), то тестируемый метод возвращает сообщение об ошибке с кодом 400;
- Если `card_holder` содержит не только символы диапазона a-zA-Z и символ пробела ('Petya55_Cool H_ACK_E R'), то тестируемый метод возвращает сообщение об ошибке с кодом 400;
- Если `card_holder` не содержит ровно одного (или двух? для Оглы и vaan) символа пробела, то тестируемый метод возвращает сообщение об ошибке с кодом 400;
+ Если `card_holder` имеет значение 'Albert Einstein', то тестируемый метод не должен возвращать ошибок;

#### card_expiration

- Если `card_expiration` не соответствует формату ММ/YY, где ММ - номер месяца от 01 до 12 и YY - последние две цифры года от 00 до 99 ('-1/КГ'), то тестируемый метод возвращает сообщение об ошибке с кодом 400;
- Если `card_expiration` имеет значение MM/YY меньшее даты проверки (значение '10/10' при дате проверки 01-11-2012), то тестируемый метод возвращает сообщение об ошибке с кодом 400;
+ Если `card_expiration` имеет значение '12/99', то тестируемый метод не должен возвращать ошибок;

#### cvv

- Если `cvv` не содержит ровно 3 цифры из диапазона 0-9, то тестируемый метод возвращает сообщение об ошибке с кодом 400;
+ Если `cvv` имеет значение '059', то тестируемый метод не должен возвращать ошибок;

#### order_number

- Если `order_number` не содержит ровно 16 символов ('abc123!'), то тестируемый метод возвращает сообщение об ошибке с кодом 400;
+ Если `order_number` имеет значение 'a1b2c3d4e5+=Zyko', то тестируемый метод не должен возвращать ошибок;

#### sum

- Если `sum` содержит не только цифры диапазона 0-9 и более одного символа ',' ('18e-5,00'), то тестируемый метод возвращает сообщение об ошибке с кодом 400;
- Если `sum` содержит количество цифр после ',', более чем имеет долей валюта расчёта (пр.: 1 рубль = 100 копеек, следовательно не более 99 копеек после рубля, к примеру, "1,59 руб."), то тестируемый метод возвращает сообщение об ошибке с кодом 400;
+ Если `sum` имеет значение '1,01', то тестируемый метод не должен возвращать ошибок;

Интеграционные тесты
--------------------

### Backend <-> Frontend

- Если оставить все поля ввода пустыми и нажать оплатить, то все поля ввода (`card_num`, `card_holder`, `card_expiration`, `cvv`) должны быть обведены красным;
+ Если в поле ввода `card_num` ввести '1122334455667788', в поле `card_holder` ввести 'Mr Ex', в поле `card_expiration` ввести '04/22', в поле `cvv` ввести '333' и нажать оплатить, то не должно возникнуть ошибок;

### Backend <-> Repository

- Если переданный в репозиторий `order_number` не существует, то Backend должен вернуть сообщение об ошибке с кодом 400;
- Если переданный в репозиторий `order_number` отмечен как оплаченный, то Backend должен вернуть сообщение об ошибке с кодом 400;
+ Если переданный в репозиторий `order_number` существует и не отмечен как оплаченный, то не должно возникнуть сообщения об ошибке;

### Backend <-> Sevice A

- Если после передачи сервису `A` данных о карте и сумме, сервис возвращает код 403, то Backend должен вернуть сообщение об ошибке с кодом 403;
+ Если после передачи сервису `A` данных о карте и сумме, сервис возвращает код 200, то Backend не должен вернуть сообщение об ошибке;

Системные тесты
---------------

+ Если во все поля ввести валидные данные и нажать кнопку оплаты, не должно быть выведено сообщений об ошибке, но выведено сообщение `Спасибо за покупку!`;