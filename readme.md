Задача:

Система хранения событий для аналитики
Аналитик хочет иметь систему со следующими возможностями:
1) Система должна хранить события, которые в последующем будут отправляться сервису событий
2) События характеризуются важностью (аналитик готов выставлять важность в целых числах)
3) События характеризуются критериями возникновения. Событие возникает только если выполнены все критерии его возникновения. Для простоты все критерии заданы так: <критерий>=<значение>

Таким образом предположим, что аналитик заносит в систему следующие события:
<pre>
{
    priority: 1000,
    conditions: {
        param1 = 1,
        param2 = 2
    },
    event: {
        ::event::
    },
},
{
    priority: 2000,
    conditions: {
        param1 = 2,
        param2 = 2
    },
    event: {
        ::event::
    },
},
{
    priority: 3000,
    conditions: {
        param1 = 1,
        param2 = 2
    },
    event: {
        ::event::
    },
},
</pre>
От пользователя приходит запрос:
{
params: {
param1 = 1,
param2 = 2
}
}

Под этот запрос подходят первая и третья запись, т.к. в них обеих выполнены все условия, но приоритетнее третья, так как имеет больший priority.

Написать систему, которая будет уметь:
1) добавлять новое событие в систему хранения событий
2) очищать все доступные события
3) отвечать на запрос пользователя наиболее подходящим событием
4) использовать для хранения событий redis


Решение:
1) для добавления используйте метод addEvent(array $event)
2) для очистки событий используйте метод deleteEvents()
3) для поиска события используйте метод getEvent(array $params)
4) redis использован. посколько redis не хранит вложенные массивы, то разбил это на следующую структуру:
<pre>
eventN:priority
eventN:conditions
eventN:description
*где N - номер события
</pre>
События храняться в hash
